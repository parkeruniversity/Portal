this.jsviews||this.jQuery&&jQuery.views||function(a,b){function Q(a){return t[a]||(t[a]="&#"+a.charCodeAt(0)+";")}function P(a,b,c,d){function e(a){if(c[a]){f[a]=g(g({},c[a]),b[a])}}b=b||{};var f={markup:a,tmpls:[],links:[],render:K};if(c){if(c.templates){f.templates=g(g({},c.templates),b.templates)}f.parent=c;f.name=c.name+"["+d+"]";f.index=d}g(f,b);if(c){e("templates");e("tags");e("helpers");e("converters")}return f}function O(a,c,d,e){function n(b){if(""+b===b||b.nodeType>0){i=b.nodeType>0?b:!f.test(b)&&k&&k(b)[0];if(i&&i.type){b=G[i.getAttribute(u)];if(!b){a=a||"_"+s++;i.setAttribute(u,a);b=O(a,i.innerHTML,d,e);G[a]=b}}return b}}var h,i,j,l,m;h=n(c);e=e||(c.markup?c:{});e.name=a;l=e.templates;if(!h&&c.markup&&(h=n(c.markup))){if(h.fn&&(h.debug!==c.debug||h.allowCode!==c.allowCode)){h=h.markup}}if(h!==b){if(a&&!d){y[a]=function(){return c.render.apply(c,arguments)}}if(h.fn||c.fn){if(h.fn){if(a&&a!==h.name){c=g(g({},h),e)}else{c=h}}}else{c=P(h,e,d,0);M(h,c)}for(j in l){m=l[j];if(m.name!==j){l[j]=O(j,m,c)}}return c}}function N(a,b){function h(a,h,k,m,n,o,p,q,r,s,t,u,v,w,x){function y(a,c,d,e,f,g,h,i){if(d){c=(e?'view.hlp("'+e+'")':f?"view":"data")+(i?(g?"."+g:e?"":f?"":"."+d)+(h||""):(i=e?"":f?g||"":d,""));if(b&&q!=="("){c="b("+c+',"'+i+'")'}c+=i?"."+i:""}return c||a}k=k||p;q=q||w||"";m=m||"";if(n){L()}else{return((h=h||s)?(e++,h):"")+(g?(g=!t,g?a:'"'):f?(f=!u,f?a:'"'):x?e?"":c?(c=i,"\b"):",":o?(e&&L(),c=j,"\b"+k+":"):k?k.replace(l,y)+(q?(d[++e]=j,q):m):m?a:v?(d[e--]=i,v)+(q?(d[++e]=j,q):""):r?(d[e]||L(),","):(g=t,f=u,'"'))}}var c,d={},e=0,f=i,g=i;a=(a+" ").replace(m,h);return a}function M(a,b,c){function K(b,e,f,g,h,i,k,l,m,n){if(h){g=":";f="html"}var p="",r="",s=!l&&!g;e=e||g;J(n);E=n+b.length;if(i){if(A){G.push(["*",k.replace(o,"$1")])}}else if(e){if(e==="else"){H[5]=a.substring(H[5],n);H=F.pop();G=H[3];s=j}k=k?N(k,c).replace(q,function(a,b,c){if(b){r+=c+","}else{p+=c+","}return""}):"";p=p.slice(0,-1);k=k.slice(0,-1);d=[e,f||"",k,s&&[],"{"+(p?"props:{"+p+"},":"")+"path:'"+k+"'"+(r?",ctx:{"+r.slice(0,-1)+"}":"")+"}"];if(s){F.push(H);H=d;H[5]=E}G.push(d)}else if(m){H[5]=a.substring(H[5],n);H=F.pop()}if(!H){throw"Expected block tag"}G=H[3]}function J(b){b-=E;if(b){G.push(a.substr(E,b).replace(n,"\\n"))}}var d,f,g,h,i,k,l,m,r,s,t,u,w,x,y,z,A,B=b?{allowCode:A=b.allowCode,debug:b.debug}:{},C=b&&b.tmpls,D=[],E=0,F=[],G=D,H=[,,,D],I=0;a=a.replace(p,"\\$1");a.replace(e,K);J(a.length);h=D.length;i=h?"":'"";';for(g=0;g<h;g++){f=D[g];if(f[0]==="*"){i=i.slice(0,g?-1:-3)+";"+f[1]+(g+1<h?"ret+=":"")}else if(""+f===f){i+='"'+f+'"+'}else{u=f[0];w=f[1];x=f[2];G=f[3];y=f[4];a=f[5];if(G){z=P(a,B,b,I++);M(a,z);C.push(z)}m=m||x.indexOf('view.hlp("')>-1;t=t||x.indexOf("view")>-1;i+=(u===":"?w==="html"?(l=j,"e("+x):w?(s=j,'c("'+w+'",view,'+x):(r=j,"((v="+x+')!==u?v:""'):(k=j,'t("'+u+'",view,"'+(w||"")+'",'+(G?C.length:'""')+","+y+(x?",":"")+x))+")+"}}i=new Function("data, view, j, b, u",v+(r?"v,":"")+(k?"t=j.tag,":"")+(s?"c=j.convert,":"")+(l?"e=j.converters.html,":"")+"ret; try{\n\n"+(B.debug?"debugger;":"")+(A?"ret=":"return ")+i.slice(0,-1)+";\n\n"+(A?"return ret;":"")+"}catch(e){return j.err(e);}");if(b){b.fn=i;b.useVw=s||m||t||k}return i}function L(){throw"Syntax error"}function K(a,c,e,f,i){var k,l,m,n,o,p,q,r,s,t,u={},v=i===j,w=this,x="";if(w.isTag){s=w.tmpl;c=c||w.ctx;e=e||w.view;f=f||w.path;i=i||w.index;u=w.props}else{s=w.jquery&&w[0]||w}e=e||z.topView;r=e.ctx;t=s.layout;if(a===e){a=e.data;t=j}c=c&&c===r?r:r?(r=g({},r),c)?g(r,c):r:c||{};if(u.link!==b){c.link=u.link}if(!s.fn){s=G[s]||G(s)}o=c.link&&h.onRenderItem;p=c.link&&h.onRenderItems;if(s){if(d.isArray(a)&&!t){n=v?e:i!==b&&e||E(c,f,e,a,s,i);for(k=0,l=a.length;k<l;k++){m=a[k];q=s.fn(m,E(c,f,n,m,s,(i||0)+k),z);x+=o?o(q,u):q}}else{n=v?e:E(c,f,e,a,s,i);x+=a||t?s.fn(a,n,z):""}e.topKey=n.index;return p?p(x,f,n.index,s,u):x}return""}function J(a,b){return F(this,J,a,b)}function I(a,b){return F(this,I,a,b)}function H(a,b){return F(this,H,a,b)}function G(a,b){return F(this,G,a,b,O)}function F(a,c,d,e,f){var g,i;if(d&&typeof d==="object"&&!d.nodeType){for(g in d){c(g,d[g])}return a}if(!d||e===b){if(f){e=f(b,e||d)}}else if(""+d===d){if(e===null){delete c[d]}else if(e=f?f(d,e):e){c[d]=e}}if(i=h.onStoreItem){i(c,d,e,f)}return e}function E(a,c,e,f,g,h){var i=e.views,j={tmpl:g,path:c,parent:e,data:f,ctx:a,views:d.isArray(f)?[]:{},hlp:B};if(d.isArray(i)){i.splice(j.index=h!==b?h:i.length,0,j)}else{i[j.index="_"+r++]=j}return j}function D(a,c,d,e,f){f.props=f.props||{};var h,i=f.props.tmpl,k=c.tmpl.tags,l=c.tmpl.templates,m=arguments,n=k&&k[a]||H[a];if(!n){return""}e=e&&c.tmpl.tmpls[e-1];i=i||e||b;f.tmpl=""+i===i?l&&l[i]||G[i]||G(i):i;f.isTag=j;f.converter=d;f.view=c;f.renderContent=K;if(c.ctx){g(f.ctx,c.ctx)}h=n.apply(f,m.length>5?x.call(m,5):[]);return h||(h===b?"":h.toString())}function C(a,b,c){var d=b.tmpl.converters;a=d&&d[a]||J[a];return a?a.call(b,c):c}function B(a){var b=this,c=b.tmpl.helpers||{};a=(b.ctx[a]?b.ctx:c[a]?c:I[a]?I:{})[a];return typeof a!=="function"?a:function(){return a.apply(b,arguments)}}function A(a,b){var c="\\"+a.charAt(0),d="\\"+a.charAt(1),g="\\"+b.charAt(0),h="\\"+b.charAt(1);z.rTag=e=d+"(?:(?:(\\w+(?=[\\/\\s"+g+"]))|(?:(\\w+)?(:)|(>)|(\\*)))"+"\\s*((?:[^"+g+"]|"+g+"(?!"+h+"))*?)"+"(\\/)?|(?:\\/(\\w+)))"+g;e=new RegExp(c+e+h,"g");f=new RegExp("<.*>|"+a+".*"+b);return this}var c="v1.0pre",d,e,f,g,h={},i=false,j=true,k=a.jQuery,l=/^(?:(true|false|null|\d[\d.]*)|([\w$]+|~([\w$]+)|#(view|([\w$]+))?)([\w$.]*?)(?:[.[]([\w$]+)\]?)?|(['"]).*\8)$/g,m=/(?:([([])\s*)?(?:([#~]?[\w$.]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*!:?\/]|(=))\s*|([#~]?[\w$.]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*([)\]])([([]?))|(\s+)/g,n=/\r?\n/g,o=/\\(['"])/g,p=/\\?(['"])/g,q=/\x08(~)?([^\x08]+)\x08/g,r=0,s=0,t={"&":"&","<":"<",">":">"},u="data-jsv-tmpl",v="var j=j||"+(k?"jQuery.":"js")+"views,",w=/[\x00"&'<>]/g,x=Array.prototype.slice,y={},z={jsviews:c,sub:h,debugMode:j,err:function(a){return z.debugMode?"<br/><b>Error:</b> <em> "+(a.message||a)+". </em>":'""'},tmplFn:M,render:y,templates:G,tags:H,helpers:I,converters:J,View:E,convert:C,delimiters:A,tag:D};if(k){d=k;d.templates=G;d.render=y;d.views=z;d.fn.render=K}else{d=a.jsviews=z;d.extend=function(a,b){var c;a=a||{};for(c in b){a[c]=b[c]}return a};d.isArray=Array&&Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"}}g=d.extend;z.topView={views:{},tmpl:{},hlp:B,ctx:z.helpers};H({"if":function(){var a=this,c=a.view;c.onElse=function(a,d){var e=0,f=d.length;while(f&&!d[e++]){if(e===f){return""}}c.onElse=b;a.path="";return a.renderContent(c)};return c.onElse(this,arguments)},"else":function(){var a=this.view;return a.onElse?a.onElse(this,arguments):""},"for":function(){var a,b=this,c="",d=arguments,e=d.length;if(b.props.layout){b.tmpl.layout=j}for(a=0;a<e;a++){c+=b.renderContent(d[a])}return c},"=":function(a){return a},"*":function(a){return a}});J({html:function(a){return a!==b?String(a).replace(w,Q):""}});A("{{","}}")}(this);
(function(a,b){function h(a){if(typeof a!=="number"){throw"Invalid index."}}function g(b,c){a([b]).triggerHandler("arrayChange",c)}function f(a){if(!this.data){return new f(a)}this._data=a;return this}function e(a,b){if(a&&b){var c=b.split(".");b=c.pop();while(a&&c.length){a=a[c.shift()]}return[a,b]}return[]}function d(a){if(!this.data){return new d(a)}this._data=a;return this}a.observable=function(b,c){return a.isArray(b)?new f(b):new d(b)};var c=[].splice;a.observable.Object=d;d.prototype={_data:null,data:function(){return this._data},setProperty:function(b,c){if(a.isArray(b)){for(var d=0,f=b.length;d<f;d++){var g=b[d];this.setProperty(g.name,g.value)}}else if(typeof b==="object"){for(var h in b){this.setProperty(h,b[h])}}else{var i,j,k=this._data,l=e(k,b);b=l[1];l=l[0];if(l){j=l[b];if(a.isFunction(j)){i=j;j=j.call(l)}if(j!=c){if(i){i.call(l,c);c=i.call(l)}else{l[b]=c}a(l).triggerHandler("propertyChange",{path:b,value:c,oldValue:j})}}}return this}};a.observable.Array=f;f.prototype={_data:null,data:function(){return this._data},insert:function(b,d){h(b);if(arguments.length>1){d=a.isArray(d)?d:[d];if(d.length>0){c.apply(this._data,[b,0].concat(d));g(this._data,{change:"insert",index:b,items:d})}}return this},remove:function(a,c){h(a);c=c===b||c===null?1:c;if(c&&a>-1){var d=this._data.slice(a,a+c);c=d.length;if(c){this._data.splice(a,c);g(this._data,{change:"remove",index:a,items:d})}}return this},move:function(a,c,d){h(a);h(c);d=d===b||d===null?1:d;if(d){var e=this._data.slice(a,a+d);this._data.splice(a,d);this._data.splice.apply(this._data,[c,0].concat(e));g(this._data,{change:"move",oldIndex:a,index:c,items:e})}return this},refresh:function(a){var b=this._data.slice(0);c.apply(this._data,[0,this._data.length].concat(a));g(this._data,{change:"refresh",oldItems:b});return this}}})(jQuery);
this.jQuery&&jQuery.link||function(a,b){function R(a){if(""+a===a){var b=a.split("[");a=o[b.shift()];while(a&&b.length){a=a.tmpls[b.shift().slice(0,-1)]}}return a}function Q(a){return a.type==="checkbox"?a.checked:i(a).val()}function P(a,b,c){var d=i.data(a,q)||c&&i.data(a,q,{view:[],link:{}});return d?d[b]:{}}function O(a,b){var c,d,e,f,g,h,j=P(b,r),k=P(b,s);for(e in j){c=j[e];h=c.srcs;d=h.length;while(d--){i(h[d]).unbind(t,c.hlr)}}if(d=k.length){f=i.view(b);while(d--){g=k[d];if(g.parent===f){f.removeViews(g.index)}}}}function N(a,c,d,e,f){var g=[],h=P(c,r,m),j=function(){B.apply({tgt:c,src:a,attr:d,fn:e,view:f},arguments)};h[d]={srcs:g,hlr:j};j(b,b,function(a,d){g.push(a);if(e.to!==b){i.data(c,q).to=[a,d,e.to]}if(i.isArray(a)){i([a]).bind(u,function(){j()})}else{i(a).bind(t,j)}return a})}function M(a,c,k,l,n,o,p,q){var r,t,u,v,w,x,z,A,B,C,D,E,F=c,H=l;o=o||{};a=p||a;if(!p&&a.nodeType===1){if(H++===0){F.nodes.push(a)}if(D=a.getAttribute(j.linkAttr)){w=F._lnk++;t=F.links||F.tmpl.links;if(!(u=t[w])){u=t[w]={};if(D.charAt(D.length-1)!=="}"){D=f+":"+D+(i.nodeName(a,"input")?":":"")+g}while(r=d.exec(D)){v=r[1];E=r[2];if(r[5]){if(!v&&(z=/^.*:([\w$]*)$/.exec(r[8]))){z=z[1];if(A=z.length){E=r[2].slice(0,-A-1)+g}}if(z===null){z=b}}u[v]=j.tmplFn(e+E+h,b,m);if(!v&&z!==b){u[v].to=z}}}for(v in u){N(F.data||n,a,v,u[v],F)}}a=a.firstChild}else{a=a.nextSibling}while(a&&a!==k){if(a.nodeType===1){M(a,F,k,H,n,o)}else if(a.nodeType===8&&(r=y.exec(a.nodeValue))){C=a.parentNode;if(r[1]){F.nextNode=a;if(F.ctx.onAfterCreate){F.ctx.onAfterCreate.call(F,F)}if(r[2]){F=c}else{return a}}else{x=x||P(C,s,m);if(r[2]){x.push(F=G(F.views[q]));q++;F.prevNode=a}else{x.push(B=G(F.views[r[5]]));B.prevNode=a;a=M(a,B,k,0,b,b,b,0)}}}else if(H===0){F.nodes.push(a)}a=a.nextSibling}}function L(a){return a?i(a,this.nodes):i(this.nodes)}function K(a,c){function d(a){var c=g[a],d=c.prevNode,e=c.nextNode,f=[d],h=h||P(c.nextNode.parentNode,s),j=h.length;if(j){c.removeViews()}while(j--){if(h[j]===c){h.splice(j,1);break}}while(d!==e){d=d.nextSibling;f.push(d)}i(f).remove();c.data=b;D(c)}var e,f=this,g=f.views,h=g.length;if(a===b){if(h===b){for(a in g){d(a)}f.views={}}else{e=h;while(e--){d(e)}f.views=[]}}else{if(c===b){if(h===b){d(a);delete g[a]}else{c=1}}if(c){e=a+c;while(e-->a){d(e)}g.splice(a,c);if(h=g.length){while(a<h){p(g[a]).setProperty("index",a++)}}}}return this}function J(a,c,d){var e=this,f=c.length,g=e.ctx,h=e.views;if(a&&!h[a-1]){return}if(f&&(d=R(d||e.tmpl))){var j=a?h[a-1].nextNode:e.prevNode,k=j.nextSibling,l=j.parentNode;i(j).after(d.render(c,g,e,b,a));l.removeChild(j.nextSibling);l.removeChild(k.previousSibling);M(l,e,k,0,b,b,j,a)}return e}function I(){var a=this,c=a.tmpl=R(a.tmpl),d=a.prevNode,e=a.nextNode,f=d.parentNode;if(c){i(a.nodes).remove();a.removeViews();a.nodes=[];i(d).after(c.render(a.data,a.ctx,a,a.path,true));f.removeChild(d.nextSibling);f.removeChild(e.previousSibling);M(f,a,e,0,b,b,d,0);D(a)}return a}function H(a){if(a){var b=this,c=a.change,d=a.index,e=a.items;switch(c){case"insert":b.addViews(d,e);break;case"remove":b.removeViews(d,e.length);break;case"move":b.render();break;case"refresh":b.render()}}return m}function G(a){var b,c,d;if(!a.render){a.onDataChanged=H;a.render=I;a.addViews=J;a.removeViews=K;a.content=L;if(!i.isArray(a.data)){a.nodes=[];a._lnk=0}c=a.parent.views;if(i.isArray(c)){b=a.index;d=c.length;while(b++<d-1){p(c[b]).setProperty("index",b)}}D(a)}return a}function F(a){return a}function E(a,b){var c=j.merge[a.nodeName.toLowerCase()];return c?b?c.to.toAttr:c.from.fromAttr:"html"}function D(a){var b,c=a.data,d=a._onArrayChange;if(d){if(d[1]===c){return}i([d[1]]).unbind(u,d[0])}if(i.isArray(c)){b=function(){C.apply(a,arguments)};i([c]).bind(u,b);a._onArrayChange=[b,c]}}function C(a,b){var c=this.ctx,d=c.beforeChange;if(!d||d.call(this,a,b)!==l){this.onDataChanged(b);if(c.afterChange){c.afterChange.call(this,a,b)}}}function B(a,b,c){var d,e,f,g,h=this,k=h.src,n=h.tgt,o=i(n),p=h.attr||E(n,m),q=h.view,r=q.ctx,s=r.beforeChange;if(!s||!(b&&s.call(this,a,b)===l)){f=h.fn(k,h.view,j,c||F);if(i.isFunction(f)){f=f.call(k)}if(g=p.lastIndexOf("css-",0)===0&&p.substr(4)){if(e=o.css(g)!==f){o.css(g,f)}}else{d=v[p];if(d){if(e=o[d]()!==f){o[d](f);if(n.nodeName.toLowerCase()==="input"){o.blur()}}}else if(e=o.attr(p)!==f){o.attr(p,f)}}if(b&&e&&r.afterChange){r.afterChange.call(h,a,b)}}}function A(a){var c,d,e,f,g,h,k,m,n=a.target,o=i(n),q=i.view(n),r=q.ctx,s=r.beforeChange;if(n.getAttribute(j.linkAttr)&&(f=P(n,"to"))){e=E(n);c=v[e];h=i.isFunction(e)?e(n):c?o[c]():o.attr(e);if((!s||!(d=s.call(q,a)===l))&&h!==b){k=j.converters[f[2]];m=f[0];f=f[1];g={src:n,tgt:m,cnvtBack:k,path:f};if(k){h=k(h)}if(h!==b&&m){p(m).setProperty(f,h);if(r.afterChange){r.afterChange.call(g,a)}}a.stopPropagation()}if(d){a.stopImmediatePropagation()}}}var c="v1.0pre",d,e,f,g,h,i=a.jQuery,j=i.views,k=j.sub,l=false,m=true,n=j.topView,o=j.templates,p=i.observable,q="_jsvData",r="link",s="view",t="propertyChange",u="arrayChange",v={value:"val",html:"html",text:"text"},w=i.cleanData,x=j.delimiters,y=/^(\/?)(?:(item)|(?:(tmpl)(?:\((.*),([^,)]*)\))?(?:\s+([^\s]+))?))$/,z=/^item|^tmpl(\(\$?[\w.,]*\))?(\s+[^\s]+)?$/;if(!i){throw"requires jQuery"}if(!j){throw"requires JsRender"}n._lnk=0;n.links=[];n.ctx.link=m;k.onStoreItem=function(a,b,c,d){if(b&&c&&a===o){c.link=function(a,b,d,e){i.link(a,b,d,e,c)};c.unlink=function(a,b,d,e){i.unlink(a,b,d,e,c)};i.link[b]=function(){return c.link.apply(c,arguments)};i.unlink[b]=function(){return c.unlink.apply(c,arguments)}}};k.onRenderItem=function(a,b){return"<!--item-->"+a+"<!--/item-->"};k.onRenderItems=function(a,b,c,d,e){return"<!--tmpl("+(b||"")+","+c+") "+d.name+"-->"+a+"<!--/tmpl-->"};i.extend(j,{linkAttr:"data-link",merge:{input:{from:{fromAttr:Q},to:{toAttr:"value"}}},delimiters:function(a,b){x(a,b);d=new RegExp("(?:^|s*)([\\w-]*)("+j.rTag+")","g");e=a.charAt(0);f=a.charAt(1);g=b.charAt(0);h=b.charAt(1);return this}});i.extend({view:function(b,c){b=""+b===b?i(b)[0]:b;var d,e,f,g,h,j=a.document.body,k=b;if(c){h=b.nextSibling||b.parentNode;while(h!==(b=b.firstChild||b.nextSibling||b.parentNode.nextSibling)){if(b.nodeType===8&&z.test(b.nodeValue)){e=i.view(b);if(e.prevNode===b){return e}}}return}b=b||j;if(i.isEmptyObject(n.views)){d=n}else{while(!(f=P(h=b.parentNode||j,s)).length){if(!h||b===j){P(j.parentNode,s,m).push(d=n);break}b=h}if(!d&&b===j){d=n}while(!d&&b){if(b===h){d=e;break}if(b.nodeType===8){if(/^\/item|^\/tmpl$/.test(b.nodeValue)){g=f.length;while(g--){e=f[g];if(e.nextNode===b){d=b===k&&e;b=e.prevNode;break}}}else if(z.test(b.nodeValue)){g=f.length;while(g--){e=f[g];if(e.prevNode===b){d=e;break}}}}b=b.previousSibling}d=d||i.view(h)}return d},link:function(a,c,d,e,f){function g(){A.apply({tgt:c},arguments)}e=e||n;f=f&&(o[f]||(f.markup?f:i.templates(f)));d=d||e.ctx;d.link=m;a=i(a).bind("change",g);if(f){a.empty().append(f.render(c,d,e))}M(a[0],e,b,b,c,d)},unlink:function(a){a=i(a).unbind("change");a.empty()},cleanData:function(a){i(a).each(O);w.call(i,a)}});j.delimiters("{{","}}")}(this);